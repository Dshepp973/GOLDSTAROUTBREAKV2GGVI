<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recall Check – Gold Star Distribution | V2G × GVI</title>
<meta name="description" content="Check if your food, pet food, or household item is affected by the Gold Star Distribution recall. Clear steps. No panic. V2G × GVI public safety guide.">
<!-- Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Markdown Parser -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
:root {
  --bg: #070612;
  --panel: #0D0D21;
  --ink: #F3F2FF;
  --muted: #C8C6E8;
  --gold: #E5C100;
  --purple: #3A0071;
  --danger: #FF4D4D;
  --safe: #4AE3C1;
  --ai: #8A2BE2; /* New AI color */
  --line: rgba(255, 255, 255, 0.1);
  --shadow: 0 4px 20px rgba(0,0,0,0.5);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

body {
  margin: 0;
  background: linear-gradient(180deg, #050410, #070612);
  color: var(--ink);
  min-height: 100vh;
}

.wrap {
  max-width: 800px;
  margin: auto;
  padding: 24px 16px 80px;
}

/* Header */
header {
  background: rgba(13, 13, 33, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: var(--shadow);
  border-left: 4px solid var(--gold);
}

h1 {
  margin: 0 0 12px;
  font-size: 28px;
  font-weight: 800;
  letter-spacing: -0.5px;
  color: #fff;
}

h2 {
  font-size: 1.25rem;
  margin-bottom: 16px;
  color: var(--ink);
  display: flex;
  align-items: center;
  gap: 10px;
}

p {
  color: var(--muted);
  line-height: 1.6;
  margin: 0 0 16px;
}

/* Sections */
section {
  margin-top: 24px;
  background: rgba(13, 13, 33, 0.5);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 24px;
  transition: transform 0.2s ease;
}

.ai-section {
  border: 1px solid var(--ai);
  background: linear-gradient(160deg, rgba(13, 13, 33, 0.8), rgba(138, 43, 226, 0.1));
}

.step {
  margin-bottom: 24px;
}

label {
  display: block;
  font-weight: 600;
  margin-bottom: 8px;
  color: #fff;
  font-size: 0.95rem;
}

/* Inputs */
select, input[type="text"] {
  width: 100%;
  padding: 14px;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: #0b0a1a;
  color: var(--ink);
  font-size: 16px; 
  box-sizing: border-box;
  transition: border-color 0.3s;
}

select:focus, input[type="text"]:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(229, 193, 0, 0.2);
}

/* Results */
.result {
  margin-top: 24px;
  padding: 24px;
  border-radius: 12px;
  display: none; 
  animation: slideIn 0.4s ease-out;
}

.ai-result {
  background: rgba(138, 43, 226, 0.1);
  border: 1px solid var(--ai);
  margin-top: 15px;
  padding: 15px;
  border-radius: 10px;
  display: none;
  font-size: 0.95rem;
}

.ai-result p { color: #fff; }

@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.result h3 {
  margin-top: 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.result ul {
  padding-left: 20px;
  margin-bottom: 0;
}

.result li {
  margin-bottom: 8px;
  color: var(--ink);
}

.safe {
  background: rgba(74, 227, 193, 0.1);
  border: 1px solid var(--safe);
  border-left-width: 4px;
}
.safe h3 { color: var(--safe); }

.danger {
  background: rgba(255, 77, 77, 0.1);
  border: 1px solid var(--danger);
  border-left-width: 4px;
}
.danger h3 { color: var(--danger); }

.warning {
  background: rgba(229, 193, 0, 0.1);
  border: 1px solid var(--gold);
  border-left-width: 4px;
}
.warning h3 { color: var(--gold); }

/* Legal Notice Box */
.legal-notice {
  font-size: 0.75rem;
  color: #aaa;
  background: rgba(0,0,0,0.3);
  padding: 10px;
  border-radius: 6px;
  border: 1px solid var(--line);
  margin-top: 15px;
  margin-bottom: 10px;
  font-style: italic;
}

/* Buttons */
.btn {
  display: block;
  width: 100%;
  text-align: center;
  padding: 16px;
  border-radius: 99px;
  border: none;
  background: linear-gradient(135deg, var(--purple), #5e2a9e);
  color: #fff;
  font-weight: 700;
  font-size: 1.1rem;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(58, 0, 113, 0.4);
  transition: transform 0.2s, box-shadow 0.2s;
  margin-top: 10px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(58, 0, 113, 0.6);
  background: linear-gradient(135deg, #4a008f, #7232bd);
}

.btn-ai {
  background: linear-gradient(135deg, #8A2BE2, #4B0082);
  box-shadow: 0 4px 15px rgba(138, 43, 226, 0.4);
}

.btn-ai:hover {
  background: linear-gradient(135deg, #9932CC, #6A0DAD);
  box-shadow: 0 6px 20px rgba(138, 43, 226, 0.6);
}

.btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

/* Loaders */
.loader {
  display: none;
  text-align: center;
  margin-top: 15px;
  color: var(--muted);
  font-style: italic;
}
.loader i {
  margin-right: 8px;
  animation: spin 1s linear infinite;
}
@keyframes spin { 100% { transform: rotate(360deg); } }

/* Footer */
footer {
  margin-top: 40px;
  border-top: 1px solid var(--line);
  padding-top: 24px;
  font-size: 12px;
  color: var(--muted);
  text-align: center;
}

footer a {
  color: var(--gold);
  text-decoration: none;
  transition: color 0.2s;
}

footer a:hover {
  color: #fff;
  text-decoration: underline;
}

.footer-legal {
  margin-top: 20px;
  padding: 15px;
  background: rgba(0,0,0,0.4);
  border-radius: 8px;
  font-size: 11px;
  color: #888;
  line-height: 1.5;
  text-align: justify;
}

.highlight {
  color: var(--gold);
}

/* Responsive utilities */
@media (min-width: 600px) {
  .btn {
    width: auto;
    display: inline-block;
    padding: 14px 32px;
  }
}
</style>
</head>

<body>

<div class="wrap">

  <header>
    <h1><i class="fa-solid fa-shield-halved highlight"></i> Recall Check: Gold Star</h1>
    <p>
      This guided tool helps you determine risk levels for the <strong>Gold Star Distribution</strong> recall (food, pet food, and dry goods). 
      Answer the questions below to assess safety.
    </p>
    <div style="font-size: 0.85rem; background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 6px; display: inline-block;">
      <i class="fa-solid fa-circle-info"></i> Updated: December 2025
    </div>
  </header>

  <!-- Standard Checker Section -->
  <section>
    <h2><i class="fa-solid fa-location-dot"></i> Step 1: Source</h2>
    <div class="step">
      <label for="store">Where did you buy the item?</label>
      <select id="store">
        <option value="">-- Select Store Type --</option>
        <option value="listed">Store listed on FDA/Recall Notice</option>
        <option value="notlisted">Major chain NOT listed</option>
        <option value="unknown">Small market / Co-op / Unsure</option>
      </select>
    </div>

    <h2><i class="fa-solid fa-box-open"></i> Step 2: Product Type</h2>
    <div class="step">
      <label for="category">What category is the item?</label>
      <select id="category">
        <option value="">-- Select Category --</option>
        <option value="shelf">Shelf-stable (Pasta, Snacks, Candy, Beverages)</option>
        <option value="pet">Pet Food / Treats</option>
        <option value="supplement">Supplements / Healthcare</option>
        <option value="frozen">Frozen / Refrigerated Goods</option>
      </select>
    </div>

    <h2><i class="fa-solid fa-list-check"></i> Step 3: FDA Status</h2>
    <div class="step">
      <label for="listed">Is the exact product name/UPC on the recall list?</label>
      <select id="listed">
        <option value="">-- Select List Status --</option>
        <option value="yes">Yes, exact match</option>
        <option value="no">No, checked and not there</option>
        <option value="unsure">I haven't checked / Unsure</option>
      </select>
    </div>

    <button class="btn" onclick="checkRecall()">Check My Item</button>

    <!-- Results Containers -->
    <div id="resultSafe" class="result safe">
      <h3><i class="fa-solid fa-circle-check"></i> Likely Low Risk</h3>
      <p>
        Based on your answers, this item appears to be <strong>outside the primary scope</strong> of the recall.
      </p>
      <ul>
        <li>Monitor local store notices just in case.</li>
        <li>Frozen items are generally not affected by this dry-storage recall.</li>
        <li>If the packaging is intact and clean, standard use is likely safe.</li>
      </ul>
    </div>

    <div id="resultDanger" class="result danger">
      <h3><i class="fa-solid fa-triangle-exclamation"></i> HIGH RISK: DO NOT USE</h3>
      <p>
        <strong>Your item matches critical recall criteria.</strong> The risk of contamination is high.
      </p>
      <ul>
        <li><strong>STOP:</strong> Do not eat, use, or feed to pets.</li>
        <li><strong>DISPOSE:</strong> Double-bag and trash securely so animals cannot reach it.</li>
        <li><strong>CLEAN:</strong> Sanitize shelves or pantries where the item was stored.</li>
        <li><strong>REFUND:</strong> Take a photo of the UPC and contact the retailer.</li>
      </ul>

      <!-- New: Action Links Block -->
      <div style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(255,77,77,0.3);">
        <p style="margin-bottom:10px; font-size:0.95rem;">
          <strong>Step 1: Contact the Source</strong><br>
          View the official company contact details (phone/email) on the FDA notice:
        </p>
        <a href="https://www.fda.gov/safety/recalls-market-withdrawals-safety-alerts/gold-star-distribution-inc-issues-recall-certain-fda-regulated-products-three-states-including-drugs" target="_blank" class="btn" style="background: rgba(255,77,77,0.1); border: 1px solid var(--danger); color: var(--danger); font-size: 1rem; margin-bottom: 20px;">
          <i class="fa-solid fa-up-right-from-square"></i> Get Official Contact Info
        </a>

        <p style="margin-bottom:10px; font-size:0.95rem;">
          <strong>Step 2: Request Refund Template</strong><br>
          Need a sample email? Use our AI template drafter.
        </p>
        
        <!-- SPECIFIC LEGAL NOTICE FOR AI TOOL -->
        <div class="legal-notice">
          <i class="fa-solid fa-scale-balanced"></i> <strong>LEGAL DISCLAIMER:</strong> This AI tool generates a generic sample template for informational purposes only. It is <strong>NOT</strong> legal advice and does not constitute a legal demand. By using this feature, you agree to hold V2G, GVI, and their affiliates harmless from any liability. You are responsible for reviewing and editing the content before sending.
        </div>

        <button class="btn btn-ai" style="width:100%" onclick="generateRefundEmail()">
          ✨ Draft Refund Template (Sample Only)
        </button>
        <div id="refundLoader" class="loader"><i class="fa-solid fa-spinner"></i> Drafting email...</div>
        <div id="refundResult" class="ai-result"></div>
      </div>
    </div>

    <div id="resultWarning" class="result warning">
      <h3><i class="fa-solid fa-circle-exclamation"></i> CAUTION: VERIFY DETAILS</h3>
      <p>
        There is uncertainty about your item. It might be safe, but you should exercise caution.
      </p>
      <ul>
        <li>Double-check the <a href="https://www.fda.gov/safety/recalls-market-withdrawals-safety-alerts/gold-star-distribution-inc-issues-recall-certain-fda-regulated-products-three-states-including-drugs" target="_blank">FDA Recall List</a> for specific UPC codes.</li>
        <li>If the item was bought at a listed store but isn't on the product list, ask the store manager.</li>
        <li><strong>When in doubt, throw it out.</strong></li>
      </ul>
    </div>
    
    <div id="errorMsg" style="color: var(--danger); margin-top: 15px; display: none; font-weight: 600;">
      <i class="fa-solid fa-circle-xmark"></i> Please answer all questions to get a result.
    </div>
  </section>

  <!-- AI Feature Section -->
  <section class="ai-section">
    <h2><i class="fa-solid fa-robot" style="color: #c98eff"></i> AI Product Scout</h2>
    <p>
      Not sure if your specific brand is involved? Enter the product name below. 
      <strong>Gemini</strong> will search the web for recall notices linking this product to Gold Star Distribution.
    </p>
    <div class="step">
      <label for="productQuery">Product Name / Brand</label>
      <input type="text" id="productQuery" placeholder="e.g., Blue Ribbon Spaghetti 1lb">
    </div>
    <button class="btn btn-ai" onclick="checkProductWithGemini()">
      ✨ Scan with Gemini
    </button>
    
    <div id="aiLoader" class="loader"><i class="fa-solid fa-spinner"></i> Searching recall databases...</div>
    <div id="aiResult" class="ai-result"></div>
  </section>

  <section>
    <h2><i class="fa-solid fa-user-doctor"></i> Health & Safety</h2>
    <p>
      <strong>Symptoms to watch for:</strong> This recall is related to unsanitary storage conditions (potential rodent infestation).
    </p>
    <ul>
      <li>Nausea, vomiting, diarrhea, or abdominal pain.</li>
      <li>Fever or flu-like symptoms (Salmonella risk).</li>
    </ul>
    <p>If symptoms persist, contact a healthcare provider and mention potential exposure to recalled food products.</p>
  </section>

  <footer>
    <p>
      Built by <strong><a href="https://www.v2gmultimedia.com" target="_blank">V2G Multimedia</a></strong> × <strong><a href="https://www.NAHUCEGVI.org" target="_blank">GVI</a></strong><br>
      Part of the Food Safety Scrolls Project.<br>
      <span style="font-size: 0.9em; opacity: 0.8;">Explore <a href="https://www.v2gmultimedia.com/somewhere-within--the-invenity-cosmic" target="_blank">The Invenity Cosmic</a></span>
    </p>
    
    <!-- Expanded Legal Footer -->
    <div class="footer-legal">
      <strong>TERMS OF USE AND LEGAL DISCLAIMER:</strong> 
      This website and its tools are provided for educational and informational purposes only. We are NOT the news, a law firm, or a government agency. We are an independent entity aggregating publicly available safety information. 
      <br><br>
      <strong>NO LEGAL ADVICE:</strong> The content, including AI-generated email templates, does not constitute legal, medical, or professional advice. You should consult with a qualified attorney or healthcare provider for specific advice regarding your situation.
      <br><br>
      <strong>LIMITATION OF LIABILITY & INDEMNIFICATION:</strong> By using this site, you agree to indemnify, defend, and hold harmless V2G Multimedia, Global Village Initiative (GVI), their officers, directors, employees, agents, and affiliates from and against any and all claims, liabilities, damages, losses, or expenses (including legal fees) arising out of or in any way connected with your access to or use of this website or the information contained herein. Use of any provided templates or information is strictly at your own risk.
    </div>
  </footer>

</div>

<script>
// --- Standard Logic ---
function checkRecall() {
  const store = document.getElementById('store').value;
  const category = document.getElementById('category').value;
  const listed = document.getElementById('listed').value;
  
  const safeDiv = document.getElementById('resultSafe');
  const dangerDiv = document.getElementById('resultDanger');
  const warningDiv = document.getElementById('resultWarning');
  const errorMsg = document.getElementById('errorMsg');
  const refundResult = document.getElementById('refundResult'); // hide prev results

  safeDiv.style.display = 'none';
  dangerDiv.style.display = 'none';
  warningDiv.style.display = 'none';
  errorMsg.style.display = 'none';
  refundResult.style.display = 'none';

  if (store === "" || category === "" || listed === "") {
    errorMsg.style.display = 'block';
    return;
  }

  if (listed === "yes") {
    dangerDiv.style.display = 'block';
    return;
  }

  if (listed === "unsure" && store === "listed" && category !== "frozen") {
    warningDiv.style.display = 'block';
    return;
  }

  if (listed === "no") {
    if (store === "notlisted") {
      safeDiv.style.display = 'block';
    } else if (category === "frozen") {
      safeDiv.style.display = 'block';
    } else {
      warningDiv.style.display = 'block';
    }
    return;
  }
  warningDiv.style.display = 'block';
}

// --- Gemini API Logic ---

const apiKey = ""; // System will inject key

async function callGemini(prompt, useSearch = false) {
  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
  
  const payload = {
    contents: [{ parts: [{ text: prompt }] }]
  };

  if (useSearch) {
    payload.tools = [{ "google_search": {} }];
  }

  // Exponential backoff retry logic
  const delays = [1000, 2000, 4000, 8000, 16000];
  
  for (let i = 0; i <= delays.length; i++) {
    try {
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (!response.ok) throw new Error(`HTTP ${response.status}`);

      const data = await response.json();
      return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response generated.";
      
    } catch (error) {
      if (i === delays.length) throw error; // Re-throw after last attempt
      await new Promise(r => setTimeout(r, delays[i]));
    }
  }
}

// Feature 1: AI Product Scout (Search Grounded)
async function checkProductWithGemini() {
  const product = document.getElementById('productQuery').value;
  const resultDiv = document.getElementById('aiResult');
  const loader = document.getElementById('aiLoader');

  if (!product.trim()) {
    resultDiv.innerHTML = "<span style='color:var(--danger)'>Please enter a product name.</span>";
    resultDiv.style.display = 'block';
    return;
  }

  loader.style.display = 'block';
  resultDiv.style.display = 'none';

  const prompt = `
    The user is asking about a specific product: "${product}" in the context of the Gold Star Distribution recall (which involves rodent infestation/sanitation issues affecting dry goods, pet food, etc).
    
    Task:
    1. Search for "${product} Gold Star Distribution recall" or general recall news.
    2. Determine if this specific brand or product has been mentioned in relation to the Gold Star recall.
    3. If yes, warn the user.
    4. If no specific mention is found, advise the user to check the "Distributed By" label for "Gold Star" and inspect for signs of damage, as it might still be affected if bought from a recalled store.
    5. Be concise, empathetic, and prioritize safety. Use formatting (bolding) for key advice.
  `;

  try {
    const text = await callGemini(prompt, true); // true = enable Google Search
    resultDiv.innerHTML = marked.parse(text);
    resultDiv.style.display = 'block';
  } catch (err) {
    resultDiv.innerHTML = "⚠️ Unable to connect to AI. Please try again later.";
    resultDiv.style.display = 'block';
    console.error(err);
  } finally {
    loader.style.display = 'none';
  }
}

// Feature 2: Refund Email Drafter
async function generateRefundEmail() {
  const store = document.getElementById('store').value;
  // If store is generic value, try to infer or ask generic
  let storeName = "the store Manager";
  if(store === "listed") storeName = "Customer Service";
  
  const resultDiv = document.getElementById('refundResult');
  const loader = document.getElementById('refundLoader');

  loader.style.display = 'block';
  resultDiv.style.display = 'none';

  const prompt = `
    Draft a generic, polite, but firm consumer refund request email (or script) for a customer to send to a retailer regarding the Gold Star Distribution recall.
    The customer purchased an item that matches the recall criteria.
    
    IMPORTANT: This is a SAMPLE only. Do not act as a lawyer.
    Include placeholders like [Product Name], [Date of Purchase], and [Receipt ID].
    Mention that the item is unsafe due to the FDA-announced rodent infestation recall at the distribution level.
    Ask for a full refund or store credit based on consumer protection standards.
    Keep it professional and short.
  `;

  try {
    const text = await callGemini(prompt, false);
    resultDiv.innerHTML = "<strong>Copy this sample template:</strong><br><br>" + marked.parse(text);
    resultDiv.style.display = 'block';
  } catch (err) {
    resultDiv.innerHTML = "⚠️ Error generating draft.";
    resultDiv.style.display = 'block';
  } finally {
    loader.style.display = 'none';
  }
}
</script>

</body>
</html>
